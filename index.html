<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-inter/3.19.3/inter.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="player-card">
            <!-- Background Glow -->
            <div class="background-glow"></div>
            
            <!-- Album Art -->
            <div class="album-art-container">
                <div class="album-art-wrapper">
                    <img id="albumArt" src="src/assets/album-1.jpg" alt="Album Art" class="album-art">
                    <div class="album-overlay"></div>
                </div>
            </div>

            <!-- Track Info -->
            <div class="track-info">
                <h1 id="trackTitle" class="track-title">Electric Dreams</h1>
                <p id="trackArtist" class="track-artist">Neon Pulse</p>
                <p id="trackAlbum" class="track-album">Digital Horizons</p>
            </div>

            <!-- Progress Bar -->
            <div class="progress-section">
                <div class="progress-container">
                    <input type="range" id="progressBar" class="progress-bar" min="0" max="100" value="0">
                </div>
                <div class="time-display">
                    <span id="currentTime">0:00</span>
                    <span id="totalTime">4:03</span>
                </div>
            </div>

            <!-- Main Controls -->
            <div class="main-controls">
                <button id="shuffleBtn" class="control-btn secondary">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="16,3 21,3 21,8"></polyline>
                        <line x1="4" y1="20" x2="21" y2="3"></line>
                        <polyline points="21,16 21,21 16,21"></polyline>
                        <line x1="15" y1="15" x2="21" y2="21"></line>
                        <line x1="4" y1="4" x2="9" y2="9"></line>
                    </svg>
                </button>

                <button id="prevBtn" class="control-btn">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="19,20 9,12 19,4"></polygon>
                        <line x1="5" y1="19" x2="5" y2="5"></line>
                    </svg>
                </button>

                <button id="playPauseBtn" class="play-pause-btn">
                    <svg id="playIcon" class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="5,3 19,12 5,21"></polygon>
                    </svg>
                    <svg id="pauseIcon" class="icon hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="6" y="4" width="4" height="16"></rect>
                        <rect x="14" y="4" width="4" height="16"></rect>
                    </svg>
                </button>

                <button id="nextBtn" class="control-btn">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="5,4 15,12 5,20"></polygon>
                        <line x1="19" y1="5" x2="19" y2="19"></line>
                    </svg>
                </button>

                <button id="repeatBtn" class="control-btn secondary">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="17,1 21,5 17,9"></polyline>
                        <path d="M3,11V9a4,4 0 0,1 4,-4h11"></path>
                        <polyline points="7,23 3,19 7,15"></polyline>
                        <path d="M21,13v2a4,4 0 0,1 -4,4H6"></path>
                    </svg>
                    <span id="repeatIndicator" class="repeat-indicator hidden"></span>
                </button>
            </div>

            <!-- Secondary Controls -->
            <div class="secondary-controls">
                <button id="likeBtn" class="control-btn secondary">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20.84,4.61a5.5,5.5 0 0,0 -7.78,0L12,5.67l-1.06,-1.06a5.5,5.5 0 0,0 -7.78,7.78l1.06,1.06L12,21.23l7.78,-7.78l1.06,-1.06a5.5,5.5 0 0,0 0,-7.78z"></path>
                    </svg>
                </button>

                <div class="volume-control">
                <img src="https://i.ibb.co/fYFZPJvh/volume.png" alt="Volume" class="volume-icon">
                <input type="range" id="volumeSlider" class="volume-slider" min="0" max="100" value="75">
                </div>

                <button id="playlistBtn" class="control-btn secondary">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="8" y1="6" x2="21" y2="6"></line>
                        <line x1="8" y1="12" x2="21" y2="12"></line>
                        <line x1="8" y1="18" x2="21" y2="18"></line>
                        <line x1="3" y1="6" x2="3.01" y2="6"></line>
                        <line x1="3" y1="12" x2="3.01" y2="12"></line>
                        <line x1="3" y1="18" x2="3.01" y2="18"></line>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Playlist -->
        <div id="playlist" class="playlist hidden">
            <h3 class="playlist-title">Queue</h3>
            <div id="playlistItems" class="playlist-items">
                <!-- Playlist items will be populated by JavaScript -->
            </div>
        </div>

        <!-- Visualizer bars for playing animation -->
        <div class="visualizer hidden">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
    </div>
    <audio id="audioPlayer"></audio>

    <script>
        // Music Player Data
        const tracks = [
            {
                id: 1,
                title: "Jugraafiya",
                artist: "Udit Narayan, Shreya Ghoshal",
                album: "Super 30",
                duration: 274,
                albumArt: "assets/album-1.jpg",
                src: "assets/track-1.mp3"
            },
            {
                id: 2,
                title: "Synthwave City",
                artist: "Retro Vision",
                album: "Neon Nights",
                duration: 287,
                albumArt: "src/assets/album-2.jpg"
            },
            {
                id: 3,
                title: "Golden Spiral",
                artist: "Ambient Flow",
                album: "Organic Patterns",
                duration: 312,
                albumArt: "src/assets/album-3.jpg"
            }
        ];

        // Player State
        let currentTrackIndex = 0;
        let isPlaying = false;
        let currentTime = 0;
        let volume = 75;
        let isShuffled = false;
        let repeatMode = 0; // 0: none, 1: all, 2: one
        let isLiked = false;
        let showPlaylist = false;
        let playInterval = null;

        // DOM Elements
        const albumArt = document.getElementById('albumArt');
        const trackTitle = document.getElementById('trackTitle');
        const trackArtist = document.getElementById('trackArtist');
        const trackAlbum = document.getElementById('trackAlbum');
        const currentTimeDisplay = document.getElementById('currentTime');
        const totalTimeDisplay = document.getElementById('totalTime');
        const progressBar = document.getElementById('progressBar');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const playIcon = document.getElementById('playIcon');
        const pauseIcon = document.getElementById('pauseIcon');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const shuffleBtn = document.getElementById('shuffleBtn');
        const repeatBtn = document.getElementById('repeatBtn');
        const repeatIndicator = document.getElementById('repeatIndicator');
        const likeBtn = document.getElementById('likeBtn');
        const volumeSlider = document.getElementById('volumeSlider');
        const playlistBtn = document.getElementById('playlistBtn');
        const playlist = document.getElementById('playlist');
        const playlistItems = document.getElementById('playlistItems');

        // Utility Functions
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function updateProgressBar() {
            const progress = (currentTime / tracks[currentTrackIndex].duration) * 100;
            progressBar.value = progress;
            progressBar.style.setProperty('--progress', `${progress}%`);
        }

        function updateVolumeBar() {
            volumeSlider.style.setProperty('--volume', `${volume}%`);
        }

        function updateTrackInfo() {
            const track = tracks[currentTrackIndex];
            albumArt.src = track.albumArt;
            trackTitle.textContent = track.title;
            trackArtist.textContent = track.artist;
            trackAlbum.textContent = track.album;
            totalTimeDisplay.textContent = formatTime(track.duration);
            currentTime = 0;
            updateProgressBar();
            updatePlaylistItems();
            audioPlayer.src = track.src;
        }

        function updatePlaylistItems() {
            playlistItems.innerHTML = '';
            tracks.forEach((track, index) => {
                const item = document.createElement('div');
                item.className = `playlist-item ${index === currentTrackIndex ? 'active' : ''}`;
                item.onclick = () => selectTrack(index);
                
                item.innerHTML = `
                    <img src="assets/album-1.jpg" alt="Album Art" class="album-art">
                    <div class="playlist-item-info">
                        <div class="playlist-item-title">${track.title}</div>
                        <div class="playlist-item-artist">${track.artist}</div>
                    </div>
                    <div class="playlist-item-duration">${formatTime(track.duration)}</div>
                    ${index === currentTrackIndex && isPlaying ? `
                        <div class="visualizer">
                            <div class="bar"></div>
                            <div class="bar"></div>
                            <div class="bar"></div>
                        </div>
                    ` : ''}
                `;
                
                playlistItems.appendChild(item);
            });
        }

        // Player Functions
        function togglePlayPause() {
            isPlaying = !isPlaying;
            
            if (isPlaying) {
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
                albumArt.classList.add('playing');
                
                startPlayback();
            } else {
                playIcon.classList.remove('hidden');
                pauseIcon.classList.add('hidden');
                albumArt.classList.remove('playing');
                stopPlayback();
            }
            
            updatePlaylistItems();
        }

        function startPlayback() {
            playInterval = setInterval(() => {
                currentTime++;
                currentTimeDisplay.textContent = formatTime(currentTime);
                updateProgressBar();
                
                if (currentTime >= tracks[currentTrackIndex].duration) {
                    handleTrackEnd();
                }
            }, 1000);
        }

        function stopPlayback() {
            if (playInterval) {
                clearInterval(playInterval);
                playInterval = null;
            }
        }

        function handleTrackEnd() {
            if (repeatMode === 2) {
                // Repeat one
                currentTime = 0;
                updateProgressBar();
                return;
            }
            
            if (repeatMode === 1 || currentTrackIndex < tracks.length - 1) {
                nextTrack();
            } else {
                // End of playlist
                isPlaying = false;
                playIcon.classList.remove('hidden');
                pauseIcon.classList.add('hidden');
                albumArt.classList.remove('playing');
                stopPlayback();
                currentTime = 0;
                updateProgressBar();
                updatePlaylistItems();
            }
        }

        function nextTrack() {
            if (isShuffled) {
                currentTrackIndex = Math.floor(Math.random() * tracks.length);
            } else {
                currentTrackIndex = (currentTrackIndex + 1) % tracks.length;
            }
            updateTrackInfo();
        }

        function prevTrack() {
            if (currentTime > 5) {
                currentTime = 0;
                updateProgressBar();
            } else {
                currentTrackIndex = (currentTrackIndex - 1 + tracks.length) % tracks.length;
                updateTrackInfo();
            }
        }

        function selectTrack(index) {
            currentTrackIndex = index;
            updateTrackInfo();
            if (isPlaying) {
                // Keep playing if currently playing
            }
        }

        function toggleShuffle() {
            isShuffled = !isShuffled;
            shuffleBtn.classList.toggle('active', isShuffled);
        }

        function toggleRepeat() {
            repeatMode = (repeatMode + 1) % 3;
            
            if (repeatMode === 0) {
                repeatBtn.classList.remove('active');
                repeatIndicator.classList.add('hidden');
            } else {
                repeatBtn.classList.add('active');
                if (repeatMode === 2) {
                    repeatIndicator.classList.remove('hidden');
                } else {
                    repeatIndicator.classList.add('hidden');
                }
            }
        }

        function toggleLike() {
            isLiked = !isLiked;
            likeBtn.classList.toggle('active', isLiked);
            
            const heartIcon = likeBtn.querySelector('svg path');
            if (isLiked) {
                likeBtn.style.color = 'var(--destructive)';
                heartIcon.setAttribute('fill', 'currentColor');
            } else {
                likeBtn.style.color = '';
                heartIcon.setAttribute('fill', 'none');
            }
        }

        function togglePlaylist() {
            showPlaylist = !showPlaylist;
            playlist.classList.toggle('hidden', !showPlaylist);
            playlistBtn.classList.toggle('active', showPlaylist);
        }

        function setProgress() {
            const progress = progressBar.value;
            currentTime = Math.floor((progress / 100) * tracks[currentTrackIndex].duration);
            currentTimeDisplay.textContent = formatTime(currentTime);
            updateProgressBar();
        }

        function setVolume() {
            volume = volumeSlider.value;
            updateVolumeBar();
        }

        // Event Listeners
        playPauseBtn.addEventListener('click', togglePlayPause);
        nextBtn.addEventListener('click', nextTrack);
        prevBtn.addEventListener('click', prevTrack);
        shuffleBtn.addEventListener('click', toggleShuffle);
        repeatBtn.addEventListener('click', toggleRepeat);
        likeBtn.addEventListener('click', toggleLike);
        playlistBtn.addEventListener('click', togglePlaylist);
        progressBar.addEventListener('input', setProgress);
        volumeSlider.addEventListener('input', setVolume);

        // Keyboard Controls
        document.addEventListener('keydown', (e) => {
            switch(e.code) {
                case 'Space':
                    e.preventDefault();
                    togglePlayPause();
                    break;
                case 'ArrowRight':
                    e.preventDefault();
                    nextTrack();
                    break;
                case 'ArrowLeft':
                    e.preventDefault();
                    prevTrack();
                    break;
                case 'ArrowUp':
                    e.preventDefault();
                    volume = Math.min(100, volume + 5);
                    volumeSlider.value = volume;
                    updateVolumeBar();
                    break;
                case 'ArrowDown':
                    e.preventDefault();
                    volume = Math.max(0, volume - 5);
                    volumeSlider.value = volume;
                    updateVolumeBar();
                    break;
            }
        });

        // Touch/Mobile Support
        let touchStartX = 0;
        let touchStartY = 0;

        albumArt.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
        });

        albumArt.addEventListener('touchend', (e) => {
            if (!touchStartX || !touchStartY) return;
            
            const touchEndX = e.changedTouches[0].clientX;
            const touchEndY = e.changedTouches[0].clientY;
            
            const diffX = touchStartX - touchEndX;
            const diffY = touchStartY - touchEndY;
            
            if (Math.abs(diffX) > Math.abs(diffY)) {
                if (Math.abs(diffX) > 50) {
                    if (diffX > 0) {
                        nextTrack(); // Swipe left
                    } else {
                        prevTrack(); // Swipe right
                    }
                }
            }
            
            touchStartX = 0;
            touchStartY = 0;
        });

        // Double tap to like
        let lastTap = 0;
        albumArt.addEventListener('touchend', (e) => {
            const currentTime = new Date().getTime();
            const tapLength = currentTime - lastTap;
            
            if (tapLength < 500 && tapLength > 0) {
                toggleLike();
                
                // Add visual feedback for double tap
                albumArt.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    albumArt.style.transform = '';
                }, 200);
            }
            
            lastTap = currentTime;
        });

        // Initialize
        updateTrackInfo();
        updateVolumeBar();
        updatePlaylistItems();

        // Add some visual feedback animations
        playPauseBtn.addEventListener('mousedown', () => {
            playPauseBtn.style.transform = 'scale(0.95)';
        });

        playPauseBtn.addEventListener('mouseup', () => {
            playPauseBtn.style.transform = '';
        });

        playPauseBtn.addEventListener('mouseleave', () => {
            playPauseBtn.style.transform = '';
        });

        // Add glow effect on hover for control buttons
        document.querySelectorAll('.control-btn').forEach(btn => {
            btn.addEventListener('mouseenter', () => {
                if (btn.classList.contains('active')) {
                    btn.style.boxShadow = 'var(--shadow-glow)';
                }
            });
            
            btn.addEventListener('mouseleave', () => {
                btn.style.boxShadow = '';
            });
        });

        const audioPlayer = document.getElementById('audioPlayer');
        function playCurrentTrack() {
        const track = tracks[currentTrackIndex];
        audioPlayer.src = track.src;
        audioPlayer.play();
        }

        console.log('🎵 Music Player initialized successfully!');
        console.log('🎮 Keyboard controls: Space (play/pause), ← → (prev/next), ↑ ↓ (volume)');
        console.log('📱 Touch controls: Swipe album art (prev/next), Double tap (like)');

    </script>
</body>
</html>